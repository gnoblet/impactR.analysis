<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Survey analysis based on a Kobo tool • impactR.analysis</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Survey analysis based on a Kobo tool">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">impactR.analysis</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.5</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/kobo_analysis.html">Survey analysis based on a Kobo tool</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Survey analysis based on a Kobo tool</h1>
            
      

      <div class="d-none name"><code>kobo_analysis.Rmd</code></div>
    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://impact-initiatives-hppu.github.io/impactR.analysis/">impactR.analysis</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Attaching package: 'dplyr'</span></span>
<span><span class="co">#&gt; The following objects are masked from 'package:stats':</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     filter, lag</span></span>
<span><span class="co">#&gt; The following objects are masked from 'package:base':</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     intersect, setdiff, setequal, union</span></span></code></pre></div>
<p>This vignette emphasizes how to analyze survey data based on Kobo,
leveraging both the <code>svy_*()</code> family of functions and a Kobo
tool.</p>
<div class="section level2">
<h2 id="proportion-for-select-ones">Proportion for select ones<a class="anchor" aria-label="anchor" href="#proportion-for-select-ones"></a>
</h2>
<p>As of version v0.0.3, <code><a href="../reference/kobo_select_one.html">kobo_select_one()</a></code> uses only the
information present in the dataset, and then retrieve labels from the
Kobo tool. It means that it does not provide lines for responses that
have not been chosen.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co"># With the labels, wonderful "var_label" and "var_value_label"</span></span>
<span><span class="co"># Choices is optional</span></span>
<span><span class="co"># Survey is mandatory</span></span>
<span><span class="fu"><a href="../reference/kobo_select_one.html">kobo_select_one</a></span><span class="op">(</span><span class="va">design</span>, </span>
<span>                vars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"h_2_type_latrine"</span>, <span class="st">"admin1"</span><span class="op">)</span>, </span>
<span>                <span class="va">survey</span>, </span>
<span>                <span class="va">choices</span>, </span>
<span>                group <span class="op">=</span> <span class="st">"milieu"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># For all select ones in the survey sheet</span></span>
<span><span class="fu"><a href="../reference/kobo_select_one_all.html">kobo_select_one_all</a></span><span class="op">(</span><span class="va">design</span>, <span class="va">survey</span>, <span class="va">choices</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="proportion-for-select-multiples">Proportion for select multiples<a class="anchor" aria-label="anchor" href="#proportion-for-select-multiples"></a>
</h2>
<p>This function is deliberately conservative for the following:</p>
<ul>
<li>if a choice exists in the Kobo tool, but not in the dataset, it is
removed from the calculation;</li>
<li>if a choice exists in the dataset, but not in the Kobo tool, it will
not be taken into account; for example, if a choice has been added and
recoded during cleaning, the Kobo tool must be updated beforehand (which
goes hand in hand with the good practice of having an up-to-date Kobo
tool that can be used as a dictionary of variables;</li>
<li>input a filtered survey sheet with the variables corresponding to
the data (main, hh roster, education loop, etc.).</li>
</ul>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># With the labels, note the "choices_sep" argument</span></span>
<span><span class="co"># that allows for choosing the choice separator in the database</span></span>
<span><span class="co"># either a "/" or "." or a "_" , etc.</span></span>
<span><span class="co"># It still only accepts one variable</span></span>
<span><span class="co"># Arg 'vars' can take a vector of select_multiple variables</span></span>
<span><span class="fu"><a href="../reference/kobo_select_multiple.html">kobo_select_multiple</a></span><span class="op">(</span><span class="va">design</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"e_typ_ecole"</span>, <span class="st">"e_typ_ecole"</span><span class="op">)</span>, <span class="va">survey</span>, <span class="va">choices</span>, choices_sep <span class="op">=</span> <span class="st">"_"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># For all select multiples</span></span>
<span><span class="fu"><a href="../reference/kobo_select_multiple_all.html">kobo_select_multiple_all</a></span><span class="op">(</span><span class="va">design</span>, <span class="va">survey</span>, <span class="va">choices</span>, choices_sep <span class="op">=</span> <span class="st">"_"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="mean-and-median-for-numeric-variables-decimal-integer-calculate">Mean and median for numeric variables (decimal, integer,
calculate)<a class="anchor" aria-label="anchor" href="#mean-and-median-for-numeric-variables-decimal-integer-calculate"></a>
</h2>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Mean for one or several numeric variables</span></span>
<span><span class="fu"><a href="../reference/kobo_mean.html">kobo_mean</a></span><span class="op">(</span><span class="va">design</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"c_total_3_17_femmes"</span>, <span class="st">"e_abandont_3a_4a_fille"</span><span class="op">)</span>, <span class="va">survey</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Median for one or several numeric variables</span></span>
<span><span class="fu"><a href="../reference/kobo_median.html">kobo_median</a></span><span class="op">(</span><span class="va">design</span>, <span class="st">"f_5_depenses_ba"</span>, <span class="va">survey</span>, group <span class="op">=</span> <span class="st">"milieu"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Do the same for all variables</span></span>
<span><span class="fu"><a href="../reference/kobo_mean_all.html">kobo_mean_all</a></span><span class="op">(</span><span class="va">design</span>, <span class="va">survey</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/kobo_median_all.html">kobo_median_all</a></span><span class="op">(</span><span class="va">design</span>,<span class="va">survey</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="ratio-for-numeric-variables-decimal-integer-calculate">Ratio for numeric variables (decimal, integer, calculate)<a class="anchor" aria-label="anchor" href="#ratio-for-numeric-variables-decimal-integer-calculate"></a>
</h2>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/kobo_ratio.html">kobo_ratio</a></span><span class="op">(</span><span class="va">design</span>, nums <span class="op">=</span> <span class="st">"e_abandont_3a_4a_fille"</span>, denoms <span class="op">=</span> <span class="st">"c_total_3_17_femmes"</span>, survey <span class="op">=</span> <span class="va">survey</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="interaction-of-variables-e-g--for-needs-profiles">Interaction of variables (e.g. for needs profiles)<a class="anchor" aria-label="anchor" href="#interaction-of-variables-e-g--for-needs-profiles"></a>
</h2>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/kobo_interact.html">kobo_interact</a></span><span class="op">(</span><span class="va">design</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"h_2_type_latrine"</span>, <span class="st">"e_typ_ecole_publique"</span><span class="op">)</span>, survey <span class="op">=</span> <span class="va">survey</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="quick-automation">Quick automation<a class="anchor" aria-label="anchor" href="#quick-automation"></a>
</h2>
<p>The <code><a href="../reference/auto_kobo_analysis.html">auto_kobo_analysis()</a></code> function runs all the above
functions but <code><a href="../reference/kobo_ratio.html">kobo_ratio()</a></code> at once.</p>
<p>While all these functions provide a quick workflow for analyzing
survey data, the recommend way is to provide a data analysis plan and
use functions <code><a href="../reference/kobo_analysis.html">kobo_analysis()</a></code> or
<code>kobo_analysis_dap()</code> (see below), which allows for finer
analyses (e.g. providing ratios, labels of indicators, etc., beyond
types as defined in the Kobo tool.)</p>
</div>
<div class="section level2">
<h2 id="make-your-own-analysis">Make your own analysis<a class="anchor" aria-label="anchor" href="#make-your-own-analysis"></a>
</h2>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Calculate a mean</span></span>
<span><span class="fu"><a href="../reference/kobo_analysis.html">kobo_analysis</a></span><span class="op">(</span><span class="va">design</span>, analysis <span class="op">=</span> <span class="st">"mean"</span>, vars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"c_total_3_17_femmes"</span>, <span class="st">"e_abandont_3a_4a_fille"</span><span class="op">)</span>, <span class="va">survey</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Calculate a median</span></span>
<span><span class="fu"><a href="../reference/kobo_analysis.html">kobo_analysis</a></span><span class="op">(</span><span class="va">design</span>, analysis <span class="op">=</span> <span class="st">"median"</span>, vars <span class="op">=</span> <span class="st">"f_5_depenses_ba"</span>, <span class="va">survey</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Calculate a ratio proportion</span></span>
<span><span class="fu"><a href="../reference/kobo_analysis.html">kobo_analysis</a></span><span class="op">(</span><span class="va">design</span>, analysis <span class="op">=</span> <span class="st">"ratio"</span>, vars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"e_abandont_3a_4a_fille"</span> <span class="op">=</span> <span class="st">"c_total_3_17_femmes"</span><span class="op">)</span>, <span class="va">survey</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Calculate a select_one proportion</span></span>
<span><span class="fu"><a href="../reference/kobo_analysis.html">kobo_analysis</a></span><span class="op">(</span><span class="va">design</span>, analysis <span class="op">=</span> <span class="st">"select_one"</span>, vars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"h_2_type_latrine"</span>, <span class="st">"admin1"</span><span class="op">)</span>, <span class="va">survey</span>, <span class="va">choices</span>, na_rm <span class="op">=</span> <span class="cn">F</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Calculate a select_multiple proportion</span></span>
<span><span class="fu"><a href="../reference/kobo_analysis.html">kobo_analysis</a></span><span class="op">(</span><span class="va">design</span>, analysis <span class="op">=</span> <span class="st">"select_multiple"</span>, vars <span class="op">=</span> <span class="st">"e_typ_ecole"</span>, <span class="va">survey</span>, <span class="va">choices</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Calculat the proportio of an interaction</span></span>
<span><span class="fu"><a href="../reference/kobo_analysis.html">kobo_analysis</a></span><span class="op">(</span><span class="va">design</span>, analysis <span class="op">=</span> <span class="st">"interact"</span>, vars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"h_2_type_latrine"</span>, <span class="st">"e_typ_ecole_publique"</span><span class="op">)</span>, <span class="va">survey</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="make-your-own-analysis-using-a-data-analysis-plan">Make your own analysis using a data analysis plan<a class="anchor" aria-label="anchor" href="#make-your-own-analysis-using-a-data-analysis-plan"></a>
</h2>
<p>Necessary columns are: <code>analysis</code>, <code>vars</code>,
<code>na_rm</code>. Other arguments are to be passed for the whole data
analysis plan, e.g. group, level, vartype, etc. If there are other
columns, for instance useful for reporting such as the indicator name or
the sector, it is kept. The function runs as is:</p>
<ul>
<li>separate the dataframe to lists by analysis type</li>
<li>map out the analysis for each type</li>
<li>bind all</li>
<li>left_join the other columns</li>
</ul>
<p>It should contain only one variable to analyze per row (or in the
case of a ratio the two variables to calculate the ratio from separated
by a comma or in the case of interaction the variables separated by a
comma). The package contains an example:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">analysis_dap</span> <span class="op">|&gt;</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://tibble.tidyverse.org/reference/as_tibble.html" class="external-link">as_tibble</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 6 × 6</span></span></span>
<span><span class="co">#&gt;   sector              indicator                      var   analysis na_rm subset</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>               <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                          <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> General information Mean of the number of school-… c_to… mean     yes   House…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> Expenses            Median of food expenses        f_5_… median   yes   <span style="color: #BB0000;">NA</span>    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> Education           A ratio that does not really … e_ab… ratio    yes   Maybe…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> Sanitation          % of households by type of la… h_2_… select_… no    <span style="color: #BB0000;">NA</span>    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> Education           % of households by type of sc… e_ty… select_… yes   House…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span> Education           % of households by type of sc… e_ty… select_… no    <span style="color: #BB0000;">NA</span></span></span></code></pre></div>
<p>Then, to run the analysis, do the following:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Default</span></span>
<span><span class="fu"><a href="../reference/kobo_analysis_from_dap.html">kobo_analysis_from_dap</a></span><span class="op">(</span><span class="va">design</span>, <span class="va">analysis_dap</span>, <span class="va">survey</span>, <span class="va">choices</span>, choices_sep <span class="op">=</span> <span class="st">"_"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Grouped and confidence level of 0.99</span></span>
<span><span class="fu"><a href="../reference/kobo_analysis_from_dap.html">kobo_analysis_from_dap</a></span><span class="op">(</span><span class="va">design</span>, <span class="va">analysis_dap</span>, <span class="va">survey</span>, <span class="va">choices</span>, group <span class="op">=</span> <span class="st">"milieu"</span>, level <span class="op">=</span> <span class="fl">0.99</span>, choices_sep <span class="op">=</span> <span class="st">"_"</span><span class="op">)</span></span></code></pre></div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Noblet Guillaume.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
